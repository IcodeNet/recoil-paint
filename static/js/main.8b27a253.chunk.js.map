{"version":3,"sources":["components/shapes/Element.js","components/shapes/Rectangle.js","components/shapes/Ellipse.js","components/shapes/index.js","atoms.js","components/CanvasItem.js","components/hooks/useMove.js","components/ResizeHandler.js","components/Selection.js","components/Canvas.js","components/Button.js","components/icons/Icon.js","components/icons/Image.js","components/icons/Square.js","components/NewRectangleButton.js","components/icons/Statistics.js","components/Toolbar.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["Element","x","y","width","height","fill","label","style","onMouseDown","onClick","View","styles","root","top","left","backgroundColor","Text","StyleSheet","create","position","justifyContent","alignItems","borderRadius","shapes","rect","props","ellipse","id","newItemOrigin","itemIdsState","atom","key","default","selectedIdsState","movingItemIdsState","movingItemsSnapshotState","canvasLayoutState","itemWithId","fn","cached","Map","has","get","params","result","set","memoize","type","itemsSelector","selector","selectedIds","length","map","newValue","forEach","item","selectedItemsSelector","movingItemsSelector","allItemsSelector","selectionBoundingBox","items","right","bottom","isMutilple","computeBoundingBox","CanvasItem","itemState","useRecoilValue","Shape","shape","createShape","useMove","func","useState","isMoving","setIsMoving","clientX","clientY","origin","setOrigin","offset","setOffset","callback","useCallback","status","handleMouseDown","handleMouseMove","handleMouseUp","useEffect","removeEventListeners","window","removeEventListener","addEventListener","ResizeHandler","useRecoilState","selectedItems","setSelectedItems","selectedItemsSnapshot","setSelectedItemsSnapshot","resizeItem","resizeHandler","resizeHandlerDot","marginLeft","marginTop","cursor","borderWidth","borderColor","Selection","selection","setMovingItemIds","useSetRecoilState","borderStyle","Canvas","ref","useRef","itemIds","canvasLayout","setLayoutState","setSelectedIds","allItems","handleClick","ids","metaKey","shiftKey","selectedItem","i","onLayout","nativeEvent","layout","flex","svg","Button","Icon","disabled","others","accessibilityRole","disabledIcon","opacity","ariaLabel","children","viewBox","createElement","role","defaultProps","display","maxWidth","userSelect","textAlignVertical","iconRtl","transform","scaleX","Image","d","Square","NewRectangleButton","setItemIds","movingItemIds","Object","assign","SquareIcon","Statistics","Toolbar","button","ImageIcon","StatisticsIcon","flexDirection","marginRight","Main","movingItems","setMovingItems","movingItemsSnapshot","setMovingItemsSnapshot","snapshot","reduce","acc","borderRightWidth","borderRightColor","borderRightType","padding","borderLeftWidth","borderLeftColor","borderLeftType","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.8b27a253.chunk.js","sourcesContent":["import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native-web';\n\nexport default function Element({\n  x, y, width, height, fill, label, style, onMouseDown, onClick,\n}) {\n  return (\n    <View\n      style={\n        [\n          styles.root,\n          {\n            top: y,\n            left: x,\n            width,\n            height,\n            backgroundColor: fill,\n          },\n          style\n        ]\n      }\n      onMouseDown={onMouseDown}\n      onClick={onClick}\n    >\n      {label ? (\n        <Text>{label}</Text>\n      ) : null}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n  }\n})\n","import React from 'react';\nimport { StyleSheet } from 'react-native-web';\nimport Element from './Element';\n\nexport default function Rectangle(props) {\n  return (\n    <Element\n      {...props}\n      style={styles.root}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n\n  }\n})\n","import React from 'react';\nimport { StyleSheet } from 'react-native-web';\nimport Element from './Element';\n\nexport default function Ellipse(props) {\n  return (\n    <Element\n      {...props}\n      style={styles.root}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    borderRadius: '50%',\n  }\n})\n","import Rectangle from './Rectangle';\nimport Ellipse from './Ellipse';\n\nconst shapes = {\n  rect: Rectangle,\n  ellipse: Ellipse,\n}\n\nfunction createShape(shape) {\n  const { type } = shape;\n  return shapes[type];\n}\n\nexport {\n  Rectangle,\n  Ellipse,\n  createShape,\n}\n","import { atom, selector } from 'recoil';\n\nlet id = 1;\nexport function generateId() {\n  return id++;\n}\n\nconst newItemOrigin = { x: 0, y: 0};\nexport function setNewItemOrigin(x, y) {\n  Object.assign(newItemOrigin, { x, y });\n}\n\nfunction memoize(fn) {\n  let cached = new Map();\n  return (id, ...params) => {\n    if (cached.has(id)) {\n      return cached.get(id);\n    }\n\n    const result = fn(id, ...params);\n    cached.set(id, result);\n\n    return result;\n  }\n}\n\nexport const itemIdsState = atom({\n  key: 'itemIdsState',\n  default: [],\n});\n\nexport const selectedIdsState = atom({\n  key: 'selectedIdsState',\n  default: [],\n});\n\nexport const movingItemIdsState = atom({\n  key: 'movingItemIdsState',\n  default: [],\n});\n\nexport const movingItemsSnapshotState = atom({\n  key: 'movingItemsSnapshotState',\n  default: {},\n});\n\nexport const canvasLayoutState = atom({\n  key: 'canvasLayoutState',\n  default: {\n    x: 0,\n    y: 0,\n    width: 800,\n    height: 600,\n  }\n});\n\nexport const itemWithId =\n  memoize(id => atom({\n    key: `item${id}`,\n    default: {\n      type: 'rect',\n      id,\n      x: newItemOrigin.x,\n      y: newItemOrigin.y,\n      width: 200,\n      height: 100,\n      fill: '#dbdde4',\n      label: ''\n    }\n  }));\n\n\nfunction computeBoundingBox(items) {\n  if (!items.length) {\n    return null;\n  }\n\n  let left = null;\n  let right = null;\n  let top = null;\n  let bottom = null;\n\n  items.forEach(item => {\n    if (left === null || item.x < left) {\n      left = item.x;\n    }\n\n    if (top === null || item.y < top) {\n      top = item.y;\n    }\n\n    if (right === null || item.x + item.width > right) {\n      right = item.x + item.width;\n    }\n\n    if (bottom === null || item.y + item.height > bottom) {\n      bottom = item.y + item.height;\n    }\n  });\n\n  return {\n    x: left,\n    y: top,\n    width: right - left,\n    height: bottom - top,\n    isMutilple: items.length > 1,\n  };\n}\n\nfunction itemsSelector(key, atom) {\n  return selector({\n    key,\n    get: ({ get }) => {\n      const selectedIds = get(atom);\n      if (!selectedIds.length) {\n        return [];\n      }\n\n      return selectedIds.map(id => get(itemWithId(id)));\n    },\n    set: ({ set }, newValue) => {\n      newValue.forEach(item => {\n        let id = item.id;\n        set(itemWithId(id), item);\n      });\n    }\n  });\n}\n\nexport const selectedItemsSelector = itemsSelector('selectedItemsSelector', selectedIdsState);\nexport const movingItemsSelector = itemsSelector('movingItemsSelector', movingItemIdsState);\nexport const allItemsSelector = itemsSelector('allItemsSelector', itemIdsState);\n\nexport const selectionBoundingBox = selector({\n  key: 'selectionBoundingBox',\n  get: ({ get }) => {\n    return computeBoundingBox(get(selectedItemsSelector));\n  }\n});\n","import React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { createShape } from './shapes';\nimport { itemWithId } from '../atoms';\n\nexport default function CanvasItem({ id }) {\n  const itemState = useRecoilValue(itemWithId(id));\n\n  const Shape = createShape(itemState);\n  if (!Shape) {\n    return null;\n  }\n\n  return <Shape {...itemState} />;\n}\n","import { useState, useCallback, useEffect } from 'react';\n\nexport default function useMove(func) {\n  const [isMoving, setIsMoving] = useState(false);\n  const [origin, setOrigin] = useState({ clientX: 0, clientY: 0 });\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n\n  const callback = useCallback((status, isMoving, origin, offset) => {\n    func({ status, isMoving, origin, offset  });\n  }, [func]);\n\n  const handleMouseDown = useCallback(({ clientX, clientY }) => {\n    let origin = { clientX, clientY };\n    setIsMoving(true);\n    setOrigin(origin);\n    callback('start', true, origin, offset);\n  }, [callback, offset]);\n\n\n  const handleMouseMove = useCallback(({ clientX, clientY }) => {\n    if (!isMoving) {\n      return;\n    }\n\n    const offset = {\n      x: clientX - origin.clientX,\n      y: clientY - origin.clientY\n    };\n\n    setOffset(offset);\n    callback('moving', true, origin, offset);\n  }, [callback, isMoving, origin]);\n\n  const handleMouseUp = useCallback(() => {\n    if (!isMoving) {\n      return;\n    }\n    setIsMoving(false);\n    setOffset({ x: 0, y: 0 });\n    callback('end', false, origin, offset);\n  }, [callback, isMoving, offset, origin]);\n\n  useEffect(() => {\n\n    function addEventListeners() {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n    }\n\n    function removeEventListeners() {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    }\n\n    if (isMoving) {\n      addEventListeners();\n    } else {\n      removeEventListeners();\n    }\n\n    return removeEventListeners;\n  }, [handleMouseMove, handleMouseUp, isMoving]);\n\n  return {\n    onMouseDown: handleMouseDown,\n  }\n}\n","import React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilState } from 'recoil';\nimport { selectedItemsSelector } from '../atoms';\nimport useMove from './hooks/useMove';\n\n\nfunction resizeItem(item, offset) {\n  let { x, y, width, height } = item;\n  width += offset.x;\n  height += offset.y;\n\n  if (width < 0) {\n    width = -width;\n    x -= width;\n  }\n\n  if (height < 0) {\n    height = -height;\n    y -= height;\n  }\n\n  return {\n    ...item,\n    x,\n    y,\n    width,\n    height,\n  };\n}\n\nexport default function ResizeHandler() {\n  const [selectedItems, setSelectedItems] = useRecoilState(selectedItemsSelector);\n  const [selectedItemsSnapshot, setSelectedItemsSnapshot] = useState(null);\n\n  const { onMouseDown } = useMove(({ status, offset }) => {\n    if (selectedItems.length !== 1) {\n      return;\n    }\n\n    if (status === 'start') {\n      setSelectedItemsSnapshot(selectedItems)\n    }\n\n    if (status === 'moving') {\n      setSelectedItems(selectedItemsSnapshot.map(item => resizeItem(item, offset)));\n    }\n  })\n\n  if (selectedItems.length !== 1) {\n    return null;\n  }\n\n  const { x, y, width, height } = selectedItems[0];\n\n  return (\n    <View\n      style={[styles.resizeHandler, {\n        left: x + width,\n        top: y + height,\n      }]}\n      onMouseDown={onMouseDown}\n    >\n      <View style={styles.resizeHandlerDot} />\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  resizeHandler: {\n    width: 24,\n    height: 24,\n    marginLeft: -13,\n    marginTop: -13,\n    justifyContent: 'center',\n    alignItems: 'center',\n    cursor: 'nwse-resize',\n  },\n  resizeHandlerDot: {\n    width: 10,\n    height: 10,\n    borderRadius: 4,\n    backgroundColor: 'white',\n    borderWidth: 2,\n    borderColor: 'blue',\n    position: 'absolute',\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport ResizeHandler from './ResizeHandler';\nimport { movingItemIdsState, selectedIdsState, selectionBoundingBox } from '../atoms';\nimport useMove from './hooks/useMove';\n\nexport default function Selection() {\n  const selectedIds = useRecoilValue(selectedIdsState);\n  const selection = useRecoilValue(selectionBoundingBox);\n  const setMovingItemIds = useSetRecoilState(movingItemIdsState);\n\n  const { onMouseDown } = useMove(({ status }) => {\n    if (!selection) {\n      return null;\n    }\n\n    if (status === 'start') {\n      setMovingItemIds(selectedIds)\n    }\n\n    if (status === 'end') {\n      setMovingItemIds([])\n    }\n  })\n\n  if (!selection) {\n    return null;\n  }\n\n  const { x, y, width, height } = selection;\n\n  return (\n    <>\n      <View\n        style={[styles.selection, {\n          left: x,\n          top: y,\n          width,\n          height\n        }]}\n        onMouseDown={onMouseDown}\n      />\n      <ResizeHandler />\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  selection: {\n    borderWidth: 2,\n    borderStyle: 'dashed',\n    borderColor: 'blue',\n    position: 'absolute',\n    cursor: 'move',\n  },\n})\n","import React, { useRef, useCallback } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport CanvasItem from './CanvasItem';\nimport Selection from './Selection';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { itemIdsState, canvasLayoutState, selectedIdsState, allItemsSelector } from '../atoms';\n\nexport default function Canvas() {\n  const ref = useRef();\n  const itemIds = useRecoilValue(itemIdsState);\n  const [canvasLayout, setLayoutState] = useRecoilState(canvasLayoutState);\n  const [selectedIds, setSelectedIds] = useRecoilState(selectedIdsState);\n  const allItems = useRecoilValue(allItemsSelector);\n\n  const onLayout = ({\n    nativeEvent: {\n      layout: { x, y, width, height }\n    }\n  }) => setLayoutState({ x, y, width, height });\n\n  const handleClick = useCallback(({ clientX, clientY, metaKey, shiftKey }) => {\n\n    const x = clientX - canvasLayout.x;\n    const y = clientY - canvasLayout.y;\n    let selectedItem = null;\n    for (let i = allItems.length - 1; i >= 0; i--) {\n      let item = allItems[i];\n      if (x >= item.x && x <= item.x + item.width && y >= item.y && y <= item.y + item.height) {\n        selectedItem = item;\n        break;\n      }\n    }\n\n    let ids;\n    if (selectedItem) {\n      if (metaKey || shiftKey) {\n        ids = [...selectedIds, selectedItem.id]\n      } else {\n        ids = [selectedItem.id];\n      }\n    } else {\n      ids = [];\n    }\n\n    setSelectedIds(ids);\n\n  }, [allItems, canvasLayout.x, canvasLayout.y, selectedIds, setSelectedIds]);\n\n  return (\n    <View style={styles.root} ref={ref} onLayout={onLayout} onClick={handleClick}>\n      {itemIds.map(id => <CanvasItem key={`item-${id}`} id={id} />)}\n      <Selection />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  svg: {\n    flex: 1,\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\n\nexport default function Button({ Icon, disabled, style, ...others }) {\n\n  return (\n    <View\n      accessibilityRole=\"button\"\n      disabled={disabled}\n      style={[styles.root, disabled && styles.disabled, style]}\n      {...others}\n    >\n      <Icon style={[disabled && styles.disabledIcon]} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    backgroundColor: '#fff',\n    width: 32,\n    height: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 4,\n  },\n  disabled: {\n    cursor: 'default',\n    opacity: 0.8,\n  },\n  disabledIcon: {\n    fill: '#ccc'\n  }\n})\n","import { StyleSheet, unstable_createElement as createElement } from 'react-native-web';\n\nexport default function Icon(props) {\n  const {\n    ariaLabel, children, width, height, viewBox,\n  } = props;\n  const style = [styles.root, props.style];\n\n  return createElement(\n    'svg',\n    {\n      role: 'presentation',\n      width,\n      height,\n      'aria-label': ariaLabel,\n      style,\n      viewBox: viewBox || '0 0 24 24',\n    },\n    children,\n  );\n}\n\nIcon.defaultProps = {\n  width: 24,\n  height: 24,\n};\n\n\nconst styles = StyleSheet.create({\n  root: {\n    display: 'inline-block',\n    fill: 'currentcolor',\n    height: '1.25em',\n    maxWidth: '100%',\n    position: 'relative',\n    userSelect: 'none',\n    textAlignVertical: 'text-bottom',\n  },\n  iconRtl: {\n    transform: [{\n      scaleX: -1,\n    }],\n  },\n});\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Image(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g>\n        <path d=\"M19.235,1.75H4.765c-1.662,0-3.015,1.352-3.015,3.015v14.471c0,1.662,1.352,3.015,3.015,3.015h14.471  c1.662,0,3.015-1.352,3.015-3.015V4.765C22.25,3.102,20.898,1.75,19.235,1.75z M21.044,19.235c0,0.997-0.811,1.809-1.809,1.809  H4.765c-0.997,0-1.809-0.811-1.809-1.809v-2.181l4.866-5.407l6.573,5.975l3.635-3.029l3.015,2.512V19.235z M21.044,15.536  l-3.015-2.512l-3.601,3L7.737,9.94l-4.781,5.312V4.765c0-0.997,0.811-1.809,1.809-1.809h14.471c0.997,0,1.809,0.811,1.809,1.809  V15.536z\"/>\n        <path d=\"M16.221,10.794c1.662,0,3.015-1.352,3.015-3.015s-1.352-3.015-3.015-3.015c-1.662,0-3.015,1.352-3.015,3.015  S14.558,10.794,16.221,10.794z M16.221,5.971c0.997,0,1.809,0.811,1.809,1.809s-0.811,1.809-1.809,1.809s-1.809-0.811-1.809-1.809  S15.223,5.971,16.221,5.971z\"/>\n      </g>\n    </Icon>\n  );\n}\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Square(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g transform=\"matrix(.48 0 0 .48 0 0)\">\n        <path fill=\"#000\" d=\"M44 1h-38c-2.757 0-5 2.243-5 5v38c0 2.757 2.243 5 5 5h38c2.757 0 5-2.243 5-5v-38c0-2.757-2.243-5-5-5Zm3 43c0 1.654-1.346 3-3 3h-38c-1.654 0-3-1.346-3-3v-38c0-1.654 1.346-3 3-3h38c1.654 0 3 1.346 3 3v38Z\"></path>\n      </g>\n    </Icon>\n  );\n}\n","import React from 'react';\nimport { useRecoilState, useSetRecoilState, useRecoilValue } from 'recoil';\nimport Button from './Button';\nimport SquareIcon from './icons/Square';\nimport {\n  itemIdsState,\n  movingItemIdsState,\n  canvasLayoutState,\n  selectedIdsState,\n  generateId,\n  setNewItemOrigin,\n} from '../atoms';\nimport useMove from './hooks/useMove';\n\nexport default function NewRectangleButton({ style }) {\n  const [itemIds, setItemIds] = useRecoilState(itemIdsState);\n  const [movingItemIds, setMovingItemIds] = useRecoilState(movingItemIdsState);\n  const setSelectedIds = useSetRecoilState(selectedIdsState);\n  const canvasLayout = useRecoilValue(canvasLayoutState);\n\n  const { onMouseDown } = useMove(({ status, origin, offset, isMoving }) => {\n    if (status === 'start') {\n      let id = generateId();\n      setNewItemOrigin(origin.clientX - canvasLayout.x, origin.clientY - canvasLayout.y);\n      setItemIds([...itemIds, id]);\n      setSelectedIds([]);\n      setMovingItemIds([id]);\n    }\n\n    if (status === 'end') {\n      setSelectedIds([...movingItemIds]);\n      setMovingItemIds([]);\n    }\n  })\n\n\n  return <Button Icon={SquareIcon} style={style} onMouseDown={onMouseDown} />;\n}\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Statistics(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g transform=\"matrix(.380952 0 0 .380952 0 0)\">\n        <path d=\"M10 9h-8c-1.104 0-2 .896-2 2v40c0 1.104.896 2 2 2h8c1.104 0 2-.896 2-2v-40c0-1.104-.896-2-2-2Z\"></path>\n        <path d=\"M27.833 23h-8c-1.104 0-2.833.11-2.833.864v27.273c0 .753 1.729 1.863 2.833 1.863h8c1.105 0 1.167-1.11 1.167-1.863v-27.273c0-.754-.062-.864-1.167-.864Z\"></path>\n        <path d=\"M44.5 12h-8c-1.104 0-2.5.334-2.5 1.364v37.273c0 1.029 1.396 2.363 2.5 2.363h8c1.104 0 1.5-1.334 1.5-2.363v-37.273c0-1.03-.396-1.364-1.5-1.364Z\"></path>\n        <path d=\"M61.5 37h-8c-1.104 0-2.5-.175-2.5.228v14.545c0 .402 1.396 1.227 2.5 1.227h8c1.104 0 1.5-.825 1.5-1.228v-14.544c0-.403-.396-.228-1.5-.228Z\"></path>\n      </g>\n    </Icon>\n  );\n}\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport Button from './Button';\nimport ImageIcon from './icons/Image';\nimport NewRectangleButton from './NewRectangleButton';\nimport StatisticsIcon from './icons/Statistics';\n\nexport default function Toolbar() {\n  return (\n    <View style={styles.root}>\n      <NewRectangleButton style={styles.button} />\n      <Button disabled Icon={ImageIcon} style={styles.button} />\n      <Button disabled Icon={StatisticsIcon} style={styles.button} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flexDirection: 'row',\n  },\n  button: {\n    marginRight: 8,\n  }\n})\n","import React, { useEffect } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport Canvas from './Canvas';\nimport Toolbar from './Toolbar';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { movingItemsSelector, movingItemsSnapshotState, movingItemIdsState } from '../atoms';\nimport useMove from './hooks/useMove';\n\nexport default function Main() {\n  const [movingItems, setMovingItems] = useRecoilState(movingItemsSelector);\n  const [movingItemsSnapshot, setMovingItemsSnapshot] = useRecoilState(movingItemsSnapshotState);\n  const movingItemIds = useRecoilValue(movingItemIdsState);\n\n  const { onMouseDown } = useMove(({ status, offset, origin }) => {\n    if (status === 'moving' && movingItemIds.length) {\n      setMovingItems(movingItems.map(item => {\n        let snapshot = movingItemsSnapshot[item.id];\n        if (!snapshot) {\n          return item;\n        }\n\n        return {\n          ...snapshot,\n          x: snapshot.x + offset.x,\n          y: snapshot.y + offset.y,\n        }\n      }))\n    }\n  });\n\n  useEffect(() => {\n    setMovingItemsSnapshot(movingItems.reduce((acc, item) => {\n      return Object.assign(acc, {\n        [item.id]: item\n      })\n    }, {}))\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [movingItemIds]);\n\n  return (\n    <View style={styles.root} onMouseDown={onMouseDown}>\n      <View style={styles.left}>\n        <Toolbar />\n      </View>\n      <Canvas />\n      <View style={styles.right}></View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    height: '100vh',\n    flexDirection: 'row',\n    backgroundColor: '#ebeef2',\n  },\n  left: {\n    width: 240,\n    borderRightWidth: 1,\n    borderRightColor: '#ccc',\n    borderRightType: 'solid',\n    padding: 16\n  },\n  right: {\n    width: 200,\n    borderLeftWidth: 1,\n    borderLeftColor: '#ccc',\n    borderLeftType: 'solid',\n  }\n})\n","import React from 'react';\nimport Main from './components/Main';\nimport { RecoilRoot } from 'recoil';\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <Main />\n    </RecoilRoot>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}