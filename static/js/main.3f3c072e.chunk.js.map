{"version":3,"sources":["components/shapes/Element.js","components/shapes/Rectangle.js","components/shapes/Ellipse.js","components/shapes/index.js","recoil/defaults.js","recoil/atoms.js","utils/memoize.js","recoil/selectors.js","utils/computeBoundingBox.js","components/hooks/useMove.js","components/hooks/useMoveItems.js","components/canvas/CanvasItem.js","components/canvas/ResizeHandler.js","components/canvas/Selection.js","components/canvas/CanvasBackground.js","components/canvas/Canvas.js","components/toolbar/Button.js","components/icons/Icon.js","components/icons/Image.js","components/icons/Square.js","components/toolbar/NewRectangleButton.js","components/icons/Statistics.js","components/toolbar/Toolbar.js","components/sidebar/ItemInfo.js","components/sidebar/ItemInfoList.js","components/sidebar/Sidebar.js","components/infobar/ColorPicker.js","components/infobar/NumberInput.js","components/infobar/SelectionInfo.js","components/infobar/InformationBar.js","components/Main.js","App.js","serviceWorker.js","index.js"],"names":["Element","x","y","width","height","fill","label","style","onMouseDown","onClick","View","styles","root","top","left","backgroundColor","Text","StyleSheet","create","position","justifyContent","alignItems","borderRadius","shapes","rect","props","ellipse","defaultShape","type","gId","createNewShape","id","Object","assign","getDefaultShape","canvasLayoutState","atom","key","default","backgroundColorState","itemIdsState","selectedIdsState","movingItemIdsState","movingItemsSnapshotState","itemWithId","fn","cached","Map","params","has","get","result","set","memoize","itemsSelector","state","selector","ids","length","map","newValue","forEach","item","selectedItemsSelector","movingItemsSelector","selectionBoundingBox","items","right","bottom","isMutilple","computeBoundingBox","useMove","func","isMoving","setIsMoving","useState","origin","setOrigin","clientX","clientY","offset","setOffset","callback","useCallback","status","handleMouseDown","metaKey","shiftKey","handleMouseMove","handleMouseUp","useEffect","removeEventListeners","window","removeEventListener","addEventListener","useMoveItems","movingItems","setMovingItems","useRecoilState","movingItemsSnapshot","setMovingItemsSnapshot","movingItemIds","useRecoilValue","snapshot","reduce","acc","CanvasItem","itemState","setMovingItemIds","useSetRecoilState","selectedIds","setSelectedIds","Shape","shape","createShape","ResizeHandler","selectedItems","setSelectedItems","selectedItemsSnapshot","setSelectedItemsSnapshot","resizeItem","resizeHandler","resizeHandlerDot","marginLeft","marginTop","cursor","borderWidth","borderColor","Selection","selection","borderStyle","CanvasBackground","handleClick","absoluteFill","Canvas","ref","useRef","itemIds","setLayoutState","onLayout","nativeEvent","layout","flex","svg","Button","Icon","disabled","others","accessibilityRole","disabledIcon","opacity","ariaLabel","children","viewBox","createElement","role","defaultProps","display","maxWidth","userSelect","textAlignVertical","iconRtl","transform","scaleX","Image","d","Square","NewRectangleButton","setItemIds","canvasLayout","SquareIcon","Statistics","Toolbar","button","ImageIcon","StatisticsIcon","flexDirection","marginBottom","marginRight","ItemInfo","subLabel","fontWeight","ItemInfoList","overflow","Sidebar","borderRightWidth","borderRightColor","borderRightType","padding","ColorPicker","shown","setShown","setBackgroundColor","handleChangeComplete","color","hex","hidePopup","e","target","closest","document","body","inner","popup","nativeID","onChangeComplete","NumberInput","value","onChangeNumber","TextInput","input","onChangeText","text","number","parseInt","isNaN","paddingVertical","paddingHorizontal","SelectionInfo","updateSelectedItem","name","selectedItem","row","column","bold","columnSpace","labelRow","Row","InformationBar","title","borderLeftWidth","borderLeftColor","borderLeftType","Main","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"2TAGe,SAASA,GAAQ,EAC9BC,EAD8B,EAC3BC,EAD2B,MACxBC,EADwB,OACjBC,EADiB,KACTC,EADS,MACHC,EADG,MACIC,EADJ,YACWC,EADX,QACwBC,IAEtD,OACE,kBAACC,EAAA,EAAD,CACEH,MACE,CACEI,EAAOC,KACP,CACEC,IAAKX,EACLY,KAAMb,EACNE,QACAC,SACAW,gBAAiBV,GAEnBE,GAGJC,YAAaA,EACbC,QAASA,EAfX,+DAiBGH,EACC,kBAACU,EAAA,EAAD,iEAAOV,GACL,MAKV,MAAMK,EAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJO,SAAU,WACVC,eAAgB,SAChBC,WAAY,YCtBhB,MAAMV,EAASM,IAAWC,OAAO,CAC/BN,KAAM,KCDR,MAAMD,EAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJU,aAAc,SCZZC,EAAS,CACbC,KFAa,SAAmBC,GAChC,OACE,kBAACzB,EAAD,iBACMyB,EADN,CAEElB,MAAOI,EAAOC,KAFhB,+B,oFAAA,iCEDFc,QDDa,SAAiBD,GAC9B,OACE,kBAACzB,EAAD,iBACMyB,EADN,CAEElB,MAAOI,EAAOC,KAFhB,+B,kFAAA,kCENG,MAAMW,EAAS,GACTI,EAAe,CAC1BC,KAAM,OACN3B,EAAG,EACHC,EAAG,EACHI,MAAO,SACPD,KAAM,UACNF,MAAO,IACPC,OAAQ,KAGV,IAAIyB,EAAM,EAKH,SAASC,EAAeL,GAC7B,IAAIM,EAJGF,IAOP,OAFAN,EAAOQ,GAAMC,OAAOC,OAAO,CAAEF,MAAMJ,EAAcF,GAE1CM,EAGF,SAASG,EAAgBH,GAC9B,OAAOR,EAAOQ,IAAOJ,ECpBhB,MAAMQ,EAAoBC,eAAK,CACpCC,IAAK,oBACLC,QAAS,CACPrC,EAAG,EACHC,EAAG,EACHC,MAAO,IACPC,OAAQ,OAICmC,EAAuBH,eAAK,CACvCC,IAAK,uBACLC,QAAS,UAGEE,EAAeJ,eAAK,CAC/BC,IAAK,eACLC,QAAS,KAGEG,EAAmBL,eAAK,CACnCC,IAAK,mBACLC,QAAS,KAGEI,EAAqBN,eAAK,CACrCC,IAAK,qBACLC,QAAS,KAGEK,EAA2BP,eAAK,CAC3CC,IAAK,2BACLC,QAAS,KAGEM,ECvCE,SAAiBC,GAC9B,IAAIC,EAAS,IAAIC,IACjB,MAAO,CAAChB,KAAOiB,KACb,GAAIF,EAAOG,IAAIlB,GACb,OAAOe,EAAOI,IAAInB,GAGpB,MAAMoB,EAASN,EAAGd,KAAOiB,GAGzB,OAFAF,EAAOM,IAAIrB,EAAIoB,GAERA,GD8BTE,CAAQtB,GAAMK,eAAK,CACjBC,IAAM,OAAMN,EACZO,QAASJ,EAAgBH,MEpC7B,SAASuB,EAAcjB,EAAKkB,GAC1B,OAAOC,mBAAS,CACdnB,MACAa,IAAK,EAAGA,UACN,MAAMO,EAAMP,EAAIK,GAChB,OAAKE,EAAIC,OAIFD,EAAIE,IAAI5B,GAAMmB,EAAIN,EAAWb,KAH3B,IAKXqB,IAAK,EAAGA,OAAOQ,KACbA,EAASC,QAAQC,IACf,IAAI/B,EAAK+B,EAAK/B,GACdqB,EAAIR,EAAWb,GAAK+B,QAMrB,MAAMC,EAAwBT,EAAc,wBAAyBb,GAC/DuB,EAAsBV,EAAc,sBAAuBZ,GAG3DuB,GAFmBX,EAAc,mBAAoBd,GAE9BgB,mBAAS,CAC3CnB,IAAK,uBACLa,IAAK,EAAGA,SC/BK,SAA4BgB,GACzC,IAAKA,EAAMR,OACT,OAAO,KAGT,IAAI5C,EAAO,KACPqD,EAAQ,KACRtD,EAAM,KACNuD,EAAS,KAoBb,OAlBAF,EAAML,QAAQC,KACC,OAAThD,GAAiBgD,EAAK7D,EAAIa,KAC5BA,EAAOgD,EAAK7D,IAGF,OAARY,GAAgBiD,EAAK5D,EAAIW,KAC3BA,EAAMiD,EAAK5D,IAGC,OAAViE,GAAkBL,EAAK7D,EAAI6D,EAAK3D,MAAQgE,KAC1CA,EAAQL,EAAK7D,EAAI6D,EAAK3D,QAGT,OAAXiE,GAAmBN,EAAK5D,EAAI4D,EAAK1D,OAASgE,KAC5CA,EAASN,EAAK5D,EAAI4D,EAAK1D,UAIpB,CACLH,EAAGa,EACHZ,EAAGW,EACHV,MAAOgE,EAAQrD,EACfV,OAAQgE,EAASvD,EACjBwD,WAAYH,EAAMR,OAAS,GDFXY,CAAmBpB,EAAIa,OE9B5B,SAASQ,EAAQC,GAC9B,MAAOC,EAAUC,GAAeC,oBAAS,IAClCC,EAAQC,GAAaF,mBAAS,CAAEG,QAAS,EAAGC,QAAS,KACrDC,EAAQC,GAAaN,mBAAS,CAAE1E,EAAG,EAAGC,EAAG,IAE1CgF,EAAWC,sBAAY,CAACC,EAAQX,EAAUG,EAAQI,KACtDR,EAAK,CAAEY,SAAQX,WAAUG,SAAQI,YAChC,CAACR,IAEEa,EAAkBF,sBAAY,EAAGL,UAASC,UAASO,UAASC,eAChE,IAAIX,EAAS,CAAEE,UAASC,UAASO,UAASC,YAC1Cb,GAAY,GACZG,EAAUD,GACVM,EAAS,SAAS,EAAMN,EAAQI,IAC/B,CAACE,EAAUF,IAGRQ,EAAkBL,sBAAY,EAAGL,UAASC,cAC9C,IAAKN,EACH,OAGF,MAAMO,EAAS,CACb/E,EAAG6E,EAAUF,EAAOE,QACpB5E,EAAG6E,EAAUH,EAAOG,SAGtBE,EAAUD,GACVE,EAAS,UAAU,EAAMN,EAAQI,IAChC,CAACE,EAAUT,EAAUG,IAElBa,EAAgBN,sBAAY,KAC3BV,IAGLC,GAAY,GACZO,EAAU,CAAEhF,EAAG,EAAGC,EAAG,IACrBgF,EAAS,OAAO,EAAON,EAAQI,KAC9B,CAACE,EAAUT,EAAUO,EAAQJ,IAuBhC,OArBAc,oBAAU,KAOR,SAASC,IACPC,OAAOC,oBAAoB,YAAaL,GACxCI,OAAOC,oBAAoB,UAAWJ,GASxC,OANIhB,GATFmB,OAAOE,iBAAiB,YAAaN,GACrCI,OAAOE,iBAAiB,UAAWL,IAWnCE,IAGKA,GACN,CAACH,EAAiBC,EAAehB,IAE7B,CACLjE,YAAa6E,GC1DF,SAASU,EAAavB,GACnC,MAAOwB,EAAaC,GAAkBC,yBAAelC,IAC9CmC,EAAqBC,GAA0BF,yBAAevD,GAC/D0D,EAAgBC,yBAAe5D,IAE/B,YAAElC,GAAgB+D,EAASvB,IAC/B,MAAM,OAAEoC,EAAF,OAAUJ,GAAWhC,EAC3BwB,EAAKxB,GAEU,WAAXoC,GAAuBiB,EAAc3C,QACvCuC,EAAeD,EAAYrC,IAAIG,IAC7B,IAAIyC,EAAWJ,EAAoBrC,EAAK/B,IACxC,OAAKwE,EAIE,IACFA,EACHtG,EAAGsG,EAAStG,EAAI+E,EAAO/E,EACvBC,EAAGqG,EAASrG,EAAI8E,EAAO9E,GANhB4D,OAqBf,OATA4B,oBAAU,KACRU,EAAuBJ,EAAYQ,OAAO,CAACC,EAAK3C,IACvC9B,OAAOC,OAAOwE,EAAK,CACxB,CAAC3C,EAAK/B,IAAK+B,IAEZ,MAEF,CAACuC,IAEG,CACL7F,eCnCW,SAASkG,GAAW,GAAE3E,IACnC,MAAM4E,EAAYL,yBAAe1D,EAAWb,IACtC6E,EAAmBC,4BAAkBnE,IACpCoE,EAAaC,GAAkBb,yBAAezD,IAE/C,YAAEjC,GAAgBuF,EAAa,EAAGX,SAAQR,aAC9C,GAAe,UAAXQ,EAAoB,CACtB,IAAI3B,EAEFA,EADEmB,EAAOU,SAAWV,EAAOW,SACrB,IAAIuB,EAAa/E,GAEjB,CAACA,GAETgF,EAAetD,GACfmD,EAAiB,CAAC7E,IAGL,QAAXqD,GACFwB,EAAiB,MAMfI,ERtBR,SAAqBC,GACnB,MAAM,KAAErF,GAASqF,EACjB,OAAO1F,EAAOK,GQoBAsF,CAAYP,GAC1B,OAAKK,EAIE,kBAACA,EAAD,iBAAWL,EAAX,CAAsBnG,YAAaA,EAAnC,+B,qFAAA,kCAHE,K,8FCDI,SAAS2G,IACtB,MAAOC,EAAeC,GAAoBnB,yBAAenC,IAClDuD,EAAuBC,GAA4B5C,mBAAS,OAE7D,YAAEnE,GAAgB+D,EAAQ,EAAGa,SAAQJ,aACZ,IAAzBoC,EAAc1D,SAIH,UAAX0B,GACFmC,EAAyBH,GAGZ,WAAXhC,GACFiC,EAAiBC,EAAsB3D,IAAIG,GAtCjD,SAAoBA,EAAMkB,GACxB,IAAI,EAAE/E,EAAF,EAAKC,EAAL,MAAQC,EAAR,OAAeC,GAAW0D,EAc9B,OAbA3D,GAAS6E,EAAO/E,EAChBG,GAAU4E,EAAO9E,EAEbC,EAAQ,IACVA,GAASA,EACTF,GAAKE,GAGHC,EAAS,IACXA,GAAUA,EACVF,GAAKE,GAGA,IACF0D,EACH7D,IACAC,IACAC,QACAC,UAkBqDoH,CAAW1D,EAAMkB,QAIxE,GAA6B,IAAzBoC,EAAc1D,OAChB,OAAO,KAGT,MAAM,EAAEzD,EAAF,EAAKC,EAAL,MAAQC,EAAR,OAAeC,GAAWgH,EAAc,GAE9C,OACE,kBAAC1G,EAAA,EAAD,CACEH,MAAO,CAACI,EAAO8G,cAAe,CAC5B3G,KAAMb,EAAIE,EACVU,IAAKX,EAAIE,IAEXI,YAAaA,EALf,gEAOE,kBAACE,EAAA,EAAD,CAAMH,MAAOI,EAAO+G,iBAApB,kEAKN,MAAM/G,EAASM,IAAWC,OAAO,CAC/BuG,cAAe,CACbtH,MAAO,GACPC,OAAQ,GACRuH,YAAa,GACbC,WAAY,GACZxG,eAAgB,SAChBC,WAAY,SACZwG,OAAQ,eAEVH,iBAAkB,CAChBvH,MAAO,GACPC,OAAQ,GACRkB,aAAc,EACdP,gBAAiB,QACjB+G,YAAa,EACbC,YAAa,OACb5G,SAAU,c,0FC7EC,SAAS6G,IACtB,MAAMlB,EAAcR,yBAAe7D,GAC7BwF,EAAY3B,yBAAerC,GAC3B2C,EAAmBC,4BAAkBnE,IAErC,YAAElC,GAAgBuF,EAAa,EAAGX,aACtC,IAAK6C,EACH,OAAO,KAGM,UAAX7C,GACFwB,EAAiBE,GAGJ,QAAX1B,GACFwB,EAAiB,MAIrB,IAAKqB,EACH,OAAO,KAGT,MAAM,EAAEhI,EAAF,EAAKC,EAAL,MAAQC,EAAR,OAAeC,GAAW6H,EAEhC,OACE,oCACE,kBAACvH,EAAA,EAAD,CACEH,MAAO,CAACI,EAAOsH,UAAW,CACxBnH,KAAMb,EACNY,IAAKX,EACLC,QACAC,WAEFI,YAAaA,EAPf,iEASA,kBAAC2G,EAAD,mEAKN,MAAMxG,EAASM,IAAWC,OAAO,CAC/B+G,UAAW,CACTH,YAAa,EACbI,YAAa,SACbH,YAAa,OACb5G,SAAU,WACV0G,OAAQ,UClDG,SAASM,EAAiB1G,GACvC,MAAMsF,EAAiBF,4BAAkBpE,GACnC1B,EAAkBuF,yBAAe/D,GAEjC6F,EAAcjD,sBAAY,KAC9B4B,EAAe,KACd,CAACA,IAEJ,OACE,kBAACrG,EAAA,EAAD,CAAMH,MAAO,CAACU,IAAWoH,aAAc,CAAEtH,oBAAoBN,QAAS2H,EAAtE,+B,2FAAA,gC,uFCNW,SAASE,IACtB,MAAMC,EAAMC,mBACNC,EAAUnC,yBAAe9D,GACzBkG,EAAiB7B,4BAAkB1E,GAQzC,OACE,kBAACzB,EAAA,EAAD,CAAMH,MAAOI,EAAOC,KAAM2H,IAAKA,EAAKI,SAPrB,EACfC,aACEC,QAAU5I,IAAGC,IAAGC,QAAOC,cAErBsI,EAAe,CAAEzI,IAAGC,IAAGC,QAAOC,WAGlC,gEACE,kBAAC+H,EAAD,kEACCM,EAAQ9E,IAAI5B,GAAM,kBAAC2E,EAAD,CAAYrE,IAAM,QAAON,EAAMA,GAAIA,EAAnC,mEACnB,kBAACiG,EAAD,mEAKN,MAAMrH,EAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJkI,KAAM,EACN/H,gBAAiB,SAEnBgI,IAAK,CACHD,KAAM,K,wFC/BK,SAASE,GAAO,KAAEC,EAAF,SAAQC,EAAR,MAAkB3I,KAAU4I,IAEzD,OACE,kBAACzI,EAAA,EAAD,eACE0I,kBAAkB,SAClBF,SAAUA,EACV3I,MAAO,CAACI,EAAOC,KAAMsI,GAAYvI,EAAOuI,SAAU3I,IAC9C4I,EAJN,iEAME,kBAACF,EAAD,CAAM1I,MAAO,CAAC2I,GAAYvI,EAAO0I,cAAjC,kEAKN,MAAM1I,EAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJkH,YAAa,EACbC,YAAa,OACbhH,gBAAiB,OACjBZ,MAAO,GACPC,OAAQ,GACRgB,eAAgB,SAChBC,WAAY,SACZC,aAAc,GAEhB4H,SAAU,CACRrB,OAAQ,UACRyB,QAAS,IAEXD,aAAc,CACZhJ,KAAM,U,YC/BK,SAAS4I,EAAKxH,GAC3B,MAAM,UACJ8H,EADI,SACOC,EADP,MACiBrJ,EADjB,OACwBC,EADxB,QACgCqJ,GAClChI,EACElB,EAAQ,CAACI,EAAOC,KAAMa,EAAMlB,OAElC,OAAOmJ,YACL,MACA,CACEC,KAAM,eACNxJ,QACAC,SACA,aAAcmJ,EACdhJ,QACAkJ,QAASA,GAAW,aAEtBD,GAIJP,EAAKW,aAAe,CAClBzJ,MAAO,GACPC,OAAQ,IAIV,MAAMO,EAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJiJ,QAAS,eACTxJ,KAAM,eACND,OAAQ,SACR0J,SAAU,OACV3I,SAAU,WACV4I,WAAY,OACZC,kBAAmB,eAErBC,QAAS,CACPC,UAAW,CAAC,CACVC,QAAS,O,qFCpCA,SAASC,EAAM3I,GAC5B,OACE,kBAAC,EAAD,iBACMA,EADN,iEAGE,uFACE,0BAAM4I,EAAE,8dAAR,iEACA,0BAAMA,EAAE,uQAAR,mE,uFCPO,SAASC,GAAO7I,GAC7B,OACE,kBAAC,EAAD,iBACMA,EADN,kEAGE,uBAAGyI,UAAU,0BAAb,iEACE,0BAAM7J,KAAK,OAAOgK,EAAE,6MAApB,oECGO,SAASE,IAAmB,MAAEhK,IAC3C,MAAOkI,EAAS+B,GAActE,yBAAe1D,IACtC6D,EAAeO,GAAoBV,yBAAexD,GACnDqE,EAAiBF,4BAAkBpE,GACnCgI,EAAenE,yBAAenE,IAE9B,YAAE3B,GAAgBuF,EAAa,EAAGX,SAAQR,aAC9C,GAAe,UAAXQ,EAAoB,CACtB,IAAIrD,EAAKD,EAAe,CAAE7B,EAAG2E,EAAOE,QAAU2F,EAAaxK,EAAGC,EAAG0E,EAAOG,QAAU0F,EAAavK,IAE/FsK,EAAW,IAAI/B,EAAS1G,IACxBgF,EAAe,IACfH,EAAiB,CAAC7E,IAGL,QAAXqD,IACF2B,EAAe,IAAIV,IACnBO,EAAiB,OAKrB,OAAO,kBAACoC,EAAD,CAAQC,KAAMyB,GAAYnK,MAAOA,EAAOC,YAAaA,EAArD,+B,8FAAA,iC,2FC/BM,SAASmK,GAAWlJ,GACjC,OACE,kBAAC,EAAD,iBACMA,EADN,kEAGE,uBAAGyI,UAAU,kCAAb,iEACE,0BAAMG,EAAE,iGAAR,kEACA,0BAAMA,EAAE,wJAAR,kEACA,0BAAMA,EAAE,iJAAR,kEACA,0BAAMA,EAAE,4IAAR,oE,0FCNO,SAASO,KACtB,OACE,kBAAClK,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,iEACE,kBAAC2J,GAAD,CAAoBhK,MAAOI,GAAOkK,OAAlC,kEACA,kBAAC7B,EAAD,CAAQE,UAAQ,EAACD,KAAM6B,EAAWvK,MAAOI,GAAOkK,OAAhD,kEACA,kBAAC7B,EAAD,CAAQE,UAAQ,EAACD,KAAM8B,GAAgBxK,MAAOI,GAAOkK,OAArD,mEAKN,MAAMlK,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJoK,cAAe,MACfC,aAAc,IAEhBJ,OAAQ,CACNK,YAAa,K,2FClBF,SAASC,IAAS,GAAEpJ,IACjC,MAAM4E,EAAYL,yBAAe1D,EAAWb,KACtC,MAAEzB,EAAF,EAASL,EAAT,EAAYC,GAAMyG,EAExB,OACE,kBAACjG,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,iEACGN,GAAS,kBAACU,EAAA,EAAD,CAAMT,MAAOI,GAAOL,MAApB,kEAA4BA,GACtC,kBAACU,EAAA,EAAD,CAAMT,MAAOI,GAAOyK,SAApB,iEAAgC,QAAOnL,SAASC,OAKtD,MAAMS,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJqK,aAAc,IAEhB3K,MAAO,CACL+K,WAAY,QAEdD,SAAU,K,+FClBG,SAASE,KACtB,MAAM7C,EAAUnC,yBAAe9D,GAE/B,OACE,kBAAC9B,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,iEACG6H,EAAQ9E,IAAI5B,GAAM,kBAACoJ,GAAD,CAAU9I,IAAM,aAAYN,EAAMA,GAAIA,EAAtC,qEAKzB,MAAMpB,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJkI,KAAM,EACNyC,SAAU,U,0FCdC,SAASC,KACtB,OACE,kBAAC9K,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,gEACE,kBAACgK,GAAD,kEACA,kBAACU,GAAD,oEAKN,MAAM3K,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJT,MAAO,IACPC,OAAQ,QACRqL,iBAAkB,EAClBC,iBAAkB,OAClBC,gBAAiB,QACjBC,QAAS,M,wGCfE,SAASC,KACtB,MAAOC,EAAOC,GAAYpH,oBAAS,IAC5B5D,EAAiBiL,GAAsB9F,yBAAe3D,GAEvD0J,EAAuB9G,sBAAa+G,IACxCF,EAAmBE,EAAMC,MACxB,CAACH,IAEE5D,EAAcjD,sBAAY,KAC9B4G,GAAS,IACR,IAiBH,OAfArG,oBAAU,KACR,SAAS0G,EAAUC,GACbA,EAAEC,OAAOC,QAAQ,kBAGrBR,GAAS,GAKX,OAFAS,SAASC,KAAK3G,iBAAiB,QAASsG,GAEjC,KACLI,SAASC,KAAK5G,oBAAoB,QAASuG,KAE5C,IAGD,kBAAC1L,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAAMH,QAAS2H,EAAnC,iEACE,kBAAC1H,EAAA,EAAD,CAAMH,MAAO,CAACI,GAAO+L,MAAO,CAAE3L,gBAAiBA,IAA/C,kEACC+K,GACC,kBAACpL,EAAA,EAAD,CAAMH,MAAOI,GAAOgM,MAAOC,SAAS,eAApC,iEACE,kBAAC,gBAAD,CACEV,MAAOnL,EACP8L,iBAAkBZ,EAFpB,qEAUV,MAAMtL,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJU,aAAc,MACdP,gBAAiB,QACjB+G,YAAa,EACbC,YAAa,OACb5H,MAAO,GACPC,OAAQ,GACRuH,WAAY,GACZiE,QAAS,GAEXc,MAAO,CACLpL,aAAc,MACdnB,MAAO,GACPC,OAAQ,IAEVuM,MAAO,CACLxL,SAAU,WACVgD,MAAO,M,cC/DI,SAAS2I,GAAYrL,GAClC,MAAM,MAAEsL,EAAF,MAASxM,EAAT,eAAgByM,KAAmB7D,GAAW1H,EAUpD,OACE,kBAACwL,GAAA,EAAD,iBACM9D,EADN,CAEE4D,MAAOA,EACPxM,MAAO,CAACI,GAAOuM,MAAO3M,GACtB4M,aAbsBC,IACxB,IAAIC,EAASC,SAASF,GAClBG,MAAMF,IAGVL,EAAeK,IAIf,+B,uFAAA,iCASJ,MAAM1M,GAASM,IAAWC,OAAO,CAC/BgM,MAAO,CACLpE,KAAM,EACN0E,gBAAiB,EACjBC,kBAAmB,EACnB1M,gBAAiB,QACjBO,aAAc,EACdyG,YAAa,OACbD,YAAa,EACbF,UAAW,K,gGC3BA,SAAS8F,KACtB,MAAOtG,EAAeC,GAAoBnB,yBAAenC,GAEnD4J,EAAqBxI,sBAAY,CAACyI,EAAMb,KAC5C1F,EAAiB,CAAC,IAAID,EAAc,GAAI,CAACwG,GAAOb,MAC/C,CAAC3F,EAAeC,IAEnB,GAA6B,IAAzBD,EAAc1D,OAChB,OAAO,KAGT,MAAMmK,EAAezG,EAAc,GAGnC,OACE,kBAAC1G,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,iEACE,kBAACF,EAAA,EAAD,CAAMH,MAAOI,GAAOmN,IAApB,iEACE,kBAAC9M,EAAA,EAAD,iFAEF,kBAACN,EAAA,EAAD,CAAMH,MAAOI,GAAOmN,IAApB,iEACE,kBAACpN,EAAA,EAAD,CAAMH,MAAOI,GAAOoN,OAApB,iEACE,kBAAC/M,EAAA,EAAD,CAAMT,MAAOI,GAAOqN,KAApB,uEACA,kBAAClB,GAAD,CACEC,MAAOc,EAAa5N,EACpBM,MAAOI,GAAOuM,MACdF,eAAgBK,GAAUM,EAAmB,IAAKN,GAHpD,oEAMF,kBAAC3M,EAAA,EAAD,CAAMH,MAAOI,GAAOsN,YAApB,kEACA,kBAACvN,EAAA,EAAD,CAAMH,MAAOI,GAAOoN,OAApB,iEACE,kBAAC/M,EAAA,EAAD,CAAMT,MAAOI,GAAOqN,KAApB,uEACA,kBAAClB,GAAD,CACEC,MAAOc,EAAa3N,EACpBK,MAAOI,GAAOuM,MACdF,eAAgBK,GAAUM,EAAmB,IAAKN,GAHpD,qEAOJ,kBAAC3M,EAAA,EAAD,CAAMH,MAAOI,GAAOuN,SAApB,iEACE,kBAAClN,EAAA,EAAD,CAAMT,MAAOI,GAAOqN,KAApB,2EACA,kBAACf,GAAA,EAAD,CACEF,MAAOc,EAAavN,MACpBC,MAAOI,GAAOuM,MACdC,aAAcC,GAAQO,EAAmB,QAASP,GAHpD,oEAUR,MAAMzM,GAASM,IAAWC,OAAO,CAC/BN,KAAM,GAENkN,IAAK,CACH7C,aAAc,GACdD,cAAe,MACf3J,WAAY,UAEd6M,SAAU,GACVH,OAAQ,CACNjF,KAAM,GAERmF,YAAa,CACX9N,MAAO,GAET6N,KAAM,CACJ3C,WAAY,QAEd6B,MAAO,CACLpE,KAAM,EACN0E,gBAAiB,EACjBC,kBAAmB,EACnB1M,gBAAiB,QACjBO,aAAc,EACdyG,YAAa,OACbD,YAAa,EACbF,UAAW,K,iGC7Ef,SAASuG,IAAI,SAAE3E,IACb,OACE,kBAAC9I,EAAA,EAAD,CAAMH,MAAOI,GAAOmN,IAApB,gEAA0BtE,GAIf,SAAS4E,KACtB,OACE,kBAAC1N,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,iEACE,kBAACuN,GAAD,kEACE,kBAACnN,EAAA,EAAD,gFAEF,kBAACmN,GAAD,kEACE,kBAACnN,EAAA,EAAD,CAAMT,MAAOI,GAAO0N,MAApB,sFACA,kBAACxC,GAAD,oEAEF,kBAAC6B,GAAD,oEAKN,MAAM/M,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJT,MAAO,IACPmO,gBAAiB,EACjBC,gBAAiB,OACjBC,eAAgB,QAChB5C,QAAS,IAEXkC,IAAK,CACH7C,aAAc,GACdD,cAAe,MACf3J,WAAY,UAEdgN,MAAO,CACLhD,WAAY,U,+EClCD,SAASoD,KACtB,OACE,kBAAC/N,EAAA,EAAD,CAAMH,MAAOI,GAAOC,KAApB,gEACE,kBAAC4K,GAAD,mEACA,kBAAClD,EAAD,mEACA,kBAAC8F,GAAD,oEAKN,MAAMzN,GAASM,IAAWC,OAAO,CAC/BN,KAAM,CACJR,OAAQ,QACR4K,cAAe,MACfjK,gBAAiB,a,mECRN2N,OARf,WACE,OACE,kBAAC,aAAD,iEACE,kBAACD,GAAD,oECKcE,QACW,cAA7B/I,OAAOgJ,SAASC,UAEe,UAA7BjJ,OAAOgJ,SAASC,UAEhBjJ,OAAOgJ,SAASC,SAASC,MACvB,2D,qECbNC,IAASC,OACP,kBAAC,IAAMC,WAAP,mEACE,kBAAC,GAAD,qEAEFzC,SAAS0C,eAAe,SD0HpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,KAAKC,IACJA,EAAaC,eAEdC,MAAMC,IACLC,QAAQD,MAAMA,EAAME,a","file":"static/js/main.3f3c072e.chunk.js","sourcesContent":["import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native-web';\n\nexport default function Element({\n  x, y, width, height, fill, label, style, onMouseDown, onClick,\n}) {\n  return (\n    <View\n      style={\n        [\n          styles.root,\n          {\n            top: y,\n            left: x,\n            width,\n            height,\n            backgroundColor: fill,\n          },\n          style\n        ]\n      }\n      onMouseDown={onMouseDown}\n      onClick={onClick}\n    >\n      {label ? (\n        <Text>{label}</Text>\n      ) : null}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n  }\n})\n","import React from 'react';\nimport { StyleSheet } from 'react-native-web';\nimport Element from './Element';\n\nexport default function Rectangle(props) {\n  return (\n    <Element\n      {...props}\n      style={styles.root}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n\n  }\n})\n","import React from 'react';\nimport { StyleSheet } from 'react-native-web';\nimport Element from './Element';\n\nexport default function Ellipse(props) {\n  return (\n    <Element\n      {...props}\n      style={styles.root}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    borderRadius: '50%',\n  }\n})\n","import Rectangle from './Rectangle';\nimport Ellipse from './Ellipse';\n\nconst shapes = {\n  rect: Rectangle,\n  ellipse: Ellipse,\n}\n\nfunction createShape(shape) {\n  const { type } = shape;\n  return shapes[type];\n}\n\nexport {\n  Rectangle,\n  Ellipse,\n  createShape,\n}\n","export const shapes = {};\nexport const defaultShape = {\n  type: 'rect',\n  x: 0,\n  y: 0,\n  label: 'Recoil',\n  fill: '#dbdde4',\n  width: 200,\n  height: 100,\n};\n\nlet gId = 1;\nfunction generateId() {\n  return gId++;\n}\n\nexport function createNewShape(props) {\n  let id = generateId();\n  shapes[id] = Object.assign({ id }, defaultShape, props);\n\n  return id;\n}\n\nexport function getDefaultShape(id) {\n  return shapes[id] || defaultShape;\n}\n","import { atom } from 'recoil';\nimport memoize from '../utils/memoize';\nimport { getDefaultShape } from './defaults';\n\nexport const canvasLayoutState = atom({\n  key: 'canvasLayoutState',\n  default: {\n    x: 0,\n    y: 0,\n    width: 800,\n    height: 600,\n  }\n});\n\nexport const backgroundColorState = atom({\n  key: 'backgroundColorState',\n  default: 'white'\n});\n\nexport const itemIdsState = atom({\n  key: 'itemIdsState',\n  default: [],\n});\n\nexport const selectedIdsState = atom({\n  key: 'selectedIdsState',\n  default: [],\n});\n\nexport const movingItemIdsState = atom({\n  key: 'movingItemIdsState',\n  default: [],\n});\n\nexport const movingItemsSnapshotState = atom({\n  key: 'movingItemsSnapshotState',\n  default: {},\n});\n\nexport const itemWithId =\n  memoize(id => atom({\n    key: `item${id}`,\n    default: getDefaultShape(id),\n  }));\n\n// export const itemWithId = atomFamily({\n//   key: 'element',\n//   default: (id) => {\n//     return {\n//       id,\n//       type: 'rect',\n//       label: '',\n//       fill: '#dbdde4',\n//       x: newItemOrigin.x,\n//       y: newItemOrigin.y,\n//       width: 200,\n//       height: 100,\n//     }\n//   },\n// })\n\n\n// const dimensionStateFamily = atomFamily({\n//   key: 'dimension',\n//   default: [0, 0, 200, 100],\n// });\n","export default function memoize(fn) {\n  let cached = new Map();\n  return (id, ...params) => {\n    if (cached.has(id)) {\n      return cached.get(id);\n    }\n\n    const result = fn(id, ...params);\n    cached.set(id, result);\n\n    return result;\n  }\n}\n","import { selector } from 'recoil';\nimport computeBoundingBox from '../utils/computeBoundingBox';\nimport {\n  itemWithId, itemIdsState, selectedIdsState, movingItemIdsState\n} from './atoms';\n\nfunction itemsSelector(key, state) {\n  return selector({\n    key,\n    get: ({ get }) => {\n      const ids = get(state);\n      if (!ids.length) {\n        return [];\n      }\n\n      return ids.map(id => get(itemWithId(id)));\n    },\n    set: ({ set }, newValue) => {\n      newValue.forEach(item => {\n        let id = item.id;\n        set(itemWithId(id), item);\n      });\n    }\n  });\n}\n\nexport const selectedItemsSelector = itemsSelector('selectedItemsSelector', selectedIdsState);\nexport const movingItemsSelector = itemsSelector('movingItemsSelector', movingItemIdsState);\nexport const allItemsSelector = itemsSelector('allItemsSelector', itemIdsState);\n\nexport const selectionBoundingBox = selector({\n  key: 'selectionBoundingBox',\n  get: ({ get }) => computeBoundingBox(get(selectedItemsSelector))\n});\n","\nexport default function computeBoundingBox(items) {\n  if (!items.length) {\n    return null;\n  }\n\n  let left = null;\n  let right = null;\n  let top = null;\n  let bottom = null;\n\n  items.forEach(item => {\n    if (left === null || item.x < left) {\n      left = item.x;\n    }\n\n    if (top === null || item.y < top) {\n      top = item.y;\n    }\n\n    if (right === null || item.x + item.width > right) {\n      right = item.x + item.width;\n    }\n\n    if (bottom === null || item.y + item.height > bottom) {\n      bottom = item.y + item.height;\n    }\n  });\n\n  return {\n    x: left,\n    y: top,\n    width: right - left,\n    height: bottom - top,\n    isMutilple: items.length > 1,\n  };\n}\n","import { useState, useCallback, useEffect } from 'react';\n\nexport default function useMove(func) {\n  const [isMoving, setIsMoving] = useState(false);\n  const [origin, setOrigin] = useState({ clientX: 0, clientY: 0 });\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n\n  const callback = useCallback((status, isMoving, origin, offset) => {\n    func({ status, isMoving, origin, offset  });\n  }, [func]);\n\n  const handleMouseDown = useCallback(({ clientX, clientY, metaKey, shiftKey }) => {\n    let origin = { clientX, clientY, metaKey, shiftKey };\n    setIsMoving(true);\n    setOrigin(origin);\n    callback('start', true, origin, offset);\n  }, [callback, offset]);\n\n\n  const handleMouseMove = useCallback(({ clientX, clientY }) => {\n    if (!isMoving) {\n      return;\n    }\n\n    const offset = {\n      x: clientX - origin.clientX,\n      y: clientY - origin.clientY\n    };\n\n    setOffset(offset);\n    callback('moving', true, origin, offset);\n  }, [callback, isMoving, origin]);\n\n  const handleMouseUp = useCallback(() => {\n    if (!isMoving) {\n      return;\n    }\n    setIsMoving(false);\n    setOffset({ x: 0, y: 0 });\n    callback('end', false, origin, offset);\n  }, [callback, isMoving, offset, origin]);\n\n  useEffect(() => {\n\n    function addEventListeners() {\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('mouseup', handleMouseUp);\n    }\n\n    function removeEventListeners() {\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('mouseup', handleMouseUp);\n    }\n\n    if (isMoving) {\n      addEventListeners();\n    } else {\n      removeEventListeners();\n    }\n\n    return removeEventListeners;\n  }, [handleMouseMove, handleMouseUp, isMoving]);\n\n  return {\n    onMouseDown: handleMouseDown,\n  }\n}\n","import { useEffect } from 'react';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { movingItemsSnapshotState, movingItemIdsState } from '../../recoil/atoms';\nimport { movingItemsSelector } from '../../recoil/selectors';\nimport useMove from './useMove';\n\nexport default function useMoveItems(func) {\n  const [movingItems, setMovingItems] = useRecoilState(movingItemsSelector);\n  const [movingItemsSnapshot, setMovingItemsSnapshot] = useRecoilState(movingItemsSnapshotState);\n  const movingItemIds = useRecoilValue(movingItemIdsState);\n\n  const { onMouseDown } = useMove((params) => {\n    const { status, offset } = params;\n    func(params);\n\n    if (status === 'moving' && movingItemIds.length) {\n      setMovingItems(movingItems.map(item => {\n        let snapshot = movingItemsSnapshot[item.id];\n        if (!snapshot) {\n          return item;\n        }\n\n        return {\n          ...snapshot,\n          x: snapshot.x + offset.x,\n          y: snapshot.y + offset.y,\n        }\n      }))\n    }\n  });\n\n  useEffect(() => {\n    setMovingItemsSnapshot(movingItems.reduce((acc, item) => {\n      return Object.assign(acc, {\n        [item.id]: item\n      })\n    }, {}))\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [movingItemIds]);\n\n  return {\n    onMouseDown\n  }\n}\n","import React from 'react';\nimport { useRecoilValue, useSetRecoilState, useRecoilState } from 'recoil';\nimport { createShape } from '../shapes';\nimport { itemWithId, selectedIdsState, movingItemIdsState } from '../../recoil/atoms';\nimport useMoveItems from '../hooks/useMoveItems';\n\nexport default function CanvasItem({ id }) {\n  const itemState = useRecoilValue(itemWithId(id));\n  const setMovingItemIds = useSetRecoilState(movingItemIdsState);\n  const [selectedIds, setSelectedIds] = useRecoilState(selectedIdsState);\n\n  const { onMouseDown } = useMoveItems(({ status, origin }) => {\n    if (status === 'start') {\n      let ids;\n      if (origin.metaKey || origin.shiftKey) {\n        ids = [...selectedIds, id]\n      } else {\n        ids = [id];\n      }\n      setSelectedIds(ids);\n      setMovingItemIds([id]);\n    }\n\n    if (status === 'end') {\n      setMovingItemIds([]);\n    }\n  });\n\n\n\n  const Shape = createShape(itemState);\n  if (!Shape) {\n    return null;\n  }\n\n  return <Shape {...itemState} onMouseDown={onMouseDown} />;\n}\n","import React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilState } from 'recoil';\nimport { selectedItemsSelector } from '../../recoil/selectors';\nimport useMove from '../hooks/useMove';\n\n\nfunction resizeItem(item, offset) {\n  let { x, y, width, height } = item;\n  width += offset.x;\n  height += offset.y;\n\n  if (width < 0) {\n    width = -width;\n    x -= width;\n  }\n\n  if (height < 0) {\n    height = -height;\n    y -= height;\n  }\n\n  return {\n    ...item,\n    x,\n    y,\n    width,\n    height,\n  };\n}\n\nexport default function ResizeHandler() {\n  const [selectedItems, setSelectedItems] = useRecoilState(selectedItemsSelector);\n  const [selectedItemsSnapshot, setSelectedItemsSnapshot] = useState(null);\n\n  const { onMouseDown } = useMove(({ status, offset }) => {\n    if (selectedItems.length !== 1) {\n      return;\n    }\n\n    if (status === 'start') {\n      setSelectedItemsSnapshot(selectedItems)\n    }\n\n    if (status === 'moving') {\n      setSelectedItems(selectedItemsSnapshot.map(item => resizeItem(item, offset)));\n    }\n  })\n\n  if (selectedItems.length !== 1) {\n    return null;\n  }\n\n  const { x, y, width, height } = selectedItems[0];\n\n  return (\n    <View\n      style={[styles.resizeHandler, {\n        left: x + width,\n        top: y + height,\n      }]}\n      onMouseDown={onMouseDown}\n    >\n      <View style={styles.resizeHandlerDot} />\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  resizeHandler: {\n    width: 24,\n    height: 24,\n    marginLeft: -13,\n    marginTop: -13,\n    justifyContent: 'center',\n    alignItems: 'center',\n    cursor: 'nwse-resize',\n  },\n  resizeHandlerDot: {\n    width: 10,\n    height: 10,\n    borderRadius: 4,\n    backgroundColor: 'white',\n    borderWidth: 2,\n    borderColor: 'blue',\n    position: 'absolute',\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport ResizeHandler from './ResizeHandler';\nimport { movingItemIdsState, selectedIdsState } from '../../recoil/atoms';\nimport { selectionBoundingBox } from '../../recoil/selectors';\nimport useMoveItems from '../hooks/useMoveItems';\n\nexport default function Selection() {\n  const selectedIds = useRecoilValue(selectedIdsState);\n  const selection = useRecoilValue(selectionBoundingBox);\n  const setMovingItemIds = useSetRecoilState(movingItemIdsState);\n\n  const { onMouseDown } = useMoveItems(({ status }) => {\n    if (!selection) {\n      return null;\n    }\n\n    if (status === 'start') {\n      setMovingItemIds(selectedIds)\n    }\n\n    if (status === 'end') {\n      setMovingItemIds([])\n    }\n  })\n\n  if (!selection) {\n    return null;\n  }\n\n  const { x, y, width, height } = selection;\n\n  return (\n    <>\n      <View\n        style={[styles.selection, {\n          left: x,\n          top: y,\n          width,\n          height\n        }]}\n        onMouseDown={onMouseDown}\n      />\n      <ResizeHandler />\n    </>\n  )\n}\n\nconst styles = StyleSheet.create({\n  selection: {\n    borderWidth: 2,\n    borderStyle: 'dashed',\n    borderColor: 'blue',\n    position: 'absolute',\n    cursor: 'move',\n  },\n})\n","import React, { useCallback } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useSetRecoilState, useRecoilValue } from 'recoil';\nimport { selectedIdsState, backgroundColorState } from '../../recoil/atoms';\n\nexport default function CanvasBackground(props) {\n  const setSelectedIds = useSetRecoilState(selectedIdsState);\n  const backgroundColor = useRecoilValue(backgroundColorState);\n\n  const handleClick = useCallback(() => {\n    setSelectedIds([]);\n  }, [setSelectedIds]);\n\n  return (\n    <View style={[StyleSheet.absoluteFill, { backgroundColor }]} onClick={handleClick} />\n  );\n}\n","import React, { useRef } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport CanvasItem from './CanvasItem';\nimport Selection from './Selection';\nimport CanvasBackground from './CanvasBackground';\nimport { itemIdsState, canvasLayoutState } from '../../recoil/atoms';\n\nexport default function Canvas() {\n  const ref = useRef();\n  const itemIds = useRecoilValue(itemIdsState);\n  const setLayoutState = useSetRecoilState(canvasLayoutState);\n\n  const onLayout = ({\n    nativeEvent: {\n      layout: { x, y, width, height }\n    }\n  }) => setLayoutState({ x, y, width, height });\n\n  return (\n    <View style={styles.root} ref={ref} onLayout={onLayout}>\n      <CanvasBackground />\n      {itemIds.map(id => <CanvasItem key={`item-${id}`} id={id} />)}\n      <Selection />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  svg: {\n    flex: 1,\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\n\nexport default function Button({ Icon, disabled, style, ...others }) {\n\n  return (\n    <View\n      accessibilityRole=\"button\"\n      disabled={disabled}\n      style={[styles.root, disabled && styles.disabled, style]}\n      {...others}\n    >\n      <Icon style={[disabled && styles.disabledIcon]} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    borderWidth: 1,\n    borderColor: '#ccc',\n    backgroundColor: '#fff',\n    width: 32,\n    height: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 4,\n  },\n  disabled: {\n    cursor: 'default',\n    opacity: 0.8,\n  },\n  disabledIcon: {\n    fill: '#ccc'\n  }\n})\n","import { StyleSheet, unstable_createElement as createElement } from 'react-native-web';\n\nexport default function Icon(props) {\n  const {\n    ariaLabel, children, width, height, viewBox,\n  } = props;\n  const style = [styles.root, props.style];\n\n  return createElement(\n    'svg',\n    {\n      role: 'presentation',\n      width,\n      height,\n      'aria-label': ariaLabel,\n      style,\n      viewBox: viewBox || '0 0 24 24',\n    },\n    children,\n  );\n}\n\nIcon.defaultProps = {\n  width: 24,\n  height: 24,\n};\n\n\nconst styles = StyleSheet.create({\n  root: {\n    display: 'inline-block',\n    fill: 'currentcolor',\n    height: '1.25em',\n    maxWidth: '100%',\n    position: 'relative',\n    userSelect: 'none',\n    textAlignVertical: 'text-bottom',\n  },\n  iconRtl: {\n    transform: [{\n      scaleX: -1,\n    }],\n  },\n});\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Image(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g>\n        <path d=\"M19.235,1.75H4.765c-1.662,0-3.015,1.352-3.015,3.015v14.471c0,1.662,1.352,3.015,3.015,3.015h14.471  c1.662,0,3.015-1.352,3.015-3.015V4.765C22.25,3.102,20.898,1.75,19.235,1.75z M21.044,19.235c0,0.997-0.811,1.809-1.809,1.809  H4.765c-0.997,0-1.809-0.811-1.809-1.809v-2.181l4.866-5.407l6.573,5.975l3.635-3.029l3.015,2.512V19.235z M21.044,15.536  l-3.015-2.512l-3.601,3L7.737,9.94l-4.781,5.312V4.765c0-0.997,0.811-1.809,1.809-1.809h14.471c0.997,0,1.809,0.811,1.809,1.809  V15.536z\"/>\n        <path d=\"M16.221,10.794c1.662,0,3.015-1.352,3.015-3.015s-1.352-3.015-3.015-3.015c-1.662,0-3.015,1.352-3.015,3.015  S14.558,10.794,16.221,10.794z M16.221,5.971c0.997,0,1.809,0.811,1.809,1.809s-0.811,1.809-1.809,1.809s-1.809-0.811-1.809-1.809  S15.223,5.971,16.221,5.971z\"/>\n      </g>\n    </Icon>\n  );\n}\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Square(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g transform=\"matrix(.48 0 0 .48 0 0)\">\n        <path fill=\"#000\" d=\"M44 1h-38c-2.757 0-5 2.243-5 5v38c0 2.757 2.243 5 5 5h38c2.757 0 5-2.243 5-5v-38c0-2.757-2.243-5-5-5Zm3 43c0 1.654-1.346 3-3 3h-38c-1.654 0-3-1.346-3-3v-38c0-1.654 1.346-3 3-3h38c1.654 0 3 1.346 3 3v38Z\"></path>\n      </g>\n    </Icon>\n  );\n}\n","import React from 'react';\nimport { useRecoilState, useSetRecoilState, useRecoilValue } from 'recoil';\nimport Button from './Button';\nimport SquareIcon from '../icons/Square';\nimport {\n  itemIdsState,\n  movingItemIdsState,\n  canvasLayoutState,\n  selectedIdsState,\n} from '../../recoil/atoms';\nimport useMoveItems from '../hooks/useMoveItems';\nimport { createNewShape } from '../../recoil/defaults';\n\nexport default function NewRectangleButton({ style }) {\n  const [itemIds, setItemIds] = useRecoilState(itemIdsState);\n  const [movingItemIds, setMovingItemIds] = useRecoilState(movingItemIdsState);\n  const setSelectedIds = useSetRecoilState(selectedIdsState);\n  const canvasLayout = useRecoilValue(canvasLayoutState);\n\n  const { onMouseDown } = useMoveItems(({ status, origin }) => {\n    if (status === 'start') {\n      let id = createNewShape({ x: origin.clientX - canvasLayout.x, y: origin.clientY - canvasLayout.y });\n      // setNewItemOrigin(origin.clientX - canvasLayout.x, origin.clientY - canvasLayout.y);\n      setItemIds([...itemIds, id]);\n      setSelectedIds([]);\n      setMovingItemIds([id]);\n    }\n\n    if (status === 'end') {\n      setSelectedIds([...movingItemIds]);\n      setMovingItemIds([]);\n    }\n  })\n\n\n  return <Button Icon={SquareIcon} style={style} onMouseDown={onMouseDown} />;\n}\n","\nimport React from 'react';\nimport Icon from './Icon';\n\nexport default function Statistics(props) {\n  return (\n    <Icon\n      {...props}\n    >\n      <g transform=\"matrix(.380952 0 0 .380952 0 0)\">\n        <path d=\"M10 9h-8c-1.104 0-2 .896-2 2v40c0 1.104.896 2 2 2h8c1.104 0 2-.896 2-2v-40c0-1.104-.896-2-2-2Z\"></path>\n        <path d=\"M27.833 23h-8c-1.104 0-2.833.11-2.833.864v27.273c0 .753 1.729 1.863 2.833 1.863h8c1.105 0 1.167-1.11 1.167-1.863v-27.273c0-.754-.062-.864-1.167-.864Z\"></path>\n        <path d=\"M44.5 12h-8c-1.104 0-2.5.334-2.5 1.364v37.273c0 1.029 1.396 2.363 2.5 2.363h8c1.104 0 1.5-1.334 1.5-2.363v-37.273c0-1.03-.396-1.364-1.5-1.364Z\"></path>\n        <path d=\"M61.5 37h-8c-1.104 0-2.5-.175-2.5.228v14.545c0 .402 1.396 1.227 2.5 1.227h8c1.104 0 1.5-.825 1.5-1.228v-14.544c0-.403-.396-.228-1.5-.228Z\"></path>\n      </g>\n    </Icon>\n  );\n}\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport Button from './Button';\nimport ImageIcon from '../icons/Image';\nimport NewRectangleButton from './NewRectangleButton';\nimport StatisticsIcon from '../icons/Statistics';\n\nexport default function Toolbar() {\n  return (\n    <View style={styles.root}>\n      <NewRectangleButton style={styles.button} />\n      <Button disabled Icon={ImageIcon} style={styles.button} />\n      <Button disabled Icon={StatisticsIcon} style={styles.button} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flexDirection: 'row',\n    marginBottom: 16,\n  },\n  button: {\n    marginRight: 8,\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet, Text } from 'react-native-web';\nimport { useRecoilValue } from 'recoil';\nimport { itemWithId } from '../../recoil/atoms';\n\nexport default function ItemInfo({ id }) {\n  const itemState = useRecoilValue(itemWithId(id));\n  const { label, x, y } = itemState;\n\n  return (\n    <View style={styles.root}>\n      {label && <Text style={styles.label}>{label}</Text>}\n      <Text style={styles.subLabel}>{`(x = ${x} y = ${y})`}</Text>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    marginBottom: 16\n  },\n  label: {\n    fontWeight: 'bold',\n  },\n  subLabel: {\n\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { useRecoilValue } from 'recoil';\nimport ItemInfo from './ItemInfo';\nimport { itemIdsState } from '../../recoil/atoms';\n\nexport default function ItemInfoList() {\n  const itemIds = useRecoilValue(itemIdsState);\n\n  return (\n    <View style={styles.root}>\n      {itemIds.map(id => <ItemInfo key={`item-info-${id}`} id={id} />)}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    overflow: 'auto'\n  },\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport Toolbar from '../toolbar/Toolbar';\nimport ItemInfoList from './ItemInfoList';\n\nexport default function Sidebar() {\n  return (\n    <View style={styles.root}>\n      <Toolbar />\n      <ItemInfoList />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    width: 240,\n    height: '100vh',\n    borderRightWidth: 1,\n    borderRightColor: '#ccc',\n    borderRightType: 'solid',\n    padding: 16\n  },\n})\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport { SketchPicker } from 'react-color';\nimport { useRecoilState } from 'recoil';\nimport { backgroundColorState } from '../../recoil/atoms';\n\nexport default function ColorPicker() {\n  const [shown, setShown] = useState(false);\n  const [backgroundColor, setBackgroundColor] = useRecoilState(backgroundColorState);\n\n  const handleChangeComplete = useCallback((color) => {\n    setBackgroundColor(color.hex);\n  }, [setBackgroundColor]);\n\n  const handleClick = useCallback(() => {\n    setShown(true);\n  }, []);\n\n  useEffect(() => {\n    function hidePopup(e) {\n      if (e.target.closest('#color-picker')) {\n        return;\n      }\n      setShown(false);\n    }\n\n    document.body.addEventListener('click', hidePopup);\n\n    return () => {\n      document.body.removeEventListener('click', hidePopup);\n    }\n  }, []);\n\n  return (\n    <View style={styles.root} onClick={handleClick}>\n      <View style={[styles.inner, { backgroundColor: backgroundColor }]} />\n      {shown && (\n        <View style={styles.popup} nativeID=\"color-picker\">\n          <SketchPicker\n            color={backgroundColor}\n            onChangeComplete={handleChangeComplete}\n          />\n        </View>\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    borderRadius: '50%',\n    backgroundColor: 'white',\n    borderWidth: 1,\n    borderColor: '#ccc',\n    width: 24,\n    height: 24,\n    marginLeft: 16,\n    padding: 2,\n  },\n  inner: {\n    borderRadius: '50%',\n    width: 18,\n    height: 18,\n  },\n  popup: {\n    position: 'absolute',\n    right: 32,\n  }\n})\n","import React from 'react';\nimport { TextInput, StyleSheet } from 'react-native-web';\n\nexport default function NumberInput(props) {\n  const { value, style, onChangeNumber, ...others } = props;\n\n  const handleChnageText = (text) => {\n    let number = parseInt(text);\n    if (isNaN(number)) {\n      return;\n    }\n    onChangeNumber(number);\n  }\n\n  return (\n    <TextInput\n      {...others}\n      value={value}\n      style={[styles.input, style]}\n      onChangeText={handleChnageText}\n    />\n  )\n}\n\nconst styles = StyleSheet.create({\n  input: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 8,\n    backgroundColor: 'white',\n    borderRadius: 4,\n    borderColor: '#ccc',\n    borderWidth: 1,\n    marginTop: 8,\n  }\n})\n","import React, { useCallback } from 'react';\nimport { View, StyleSheet, Text, TextInput } from 'react-native-web';\nimport { useRecoilState } from 'recoil';\nimport NumberInput from './NumberInput';\nimport { selectedItemsSelector } from '../../recoil/selectors';\n\nexport default function SelectionInfo() {\n  const [selectedItems, setSelectedItems] = useRecoilState(selectedItemsSelector);\n\n  const updateSelectedItem = useCallback((name, value) => {\n    setSelectedItems([{...selectedItems[0], [name]: value}])\n  }, [selectedItems, setSelectedItems]);\n\n  if (selectedItems.length !== 1) {\n    return null;\n  }\n\n  const selectedItem = selectedItems[0];\n\n\n  return (\n    <View style={styles.root}>\n      <View style={styles.row}>\n        <Text>Selection:</Text>\n      </View>\n      <View style={styles.row}>\n        <View style={styles.column}>\n          <Text style={styles.bold}>X</Text>\n          <NumberInput\n            value={selectedItem.x}\n            style={styles.input}\n            onChangeNumber={number => updateSelectedItem('x', number)}\n          />\n        </View>\n        <View style={styles.columnSpace} />\n        <View style={styles.column}>\n          <Text style={styles.bold}>Y</Text>\n          <NumberInput\n            value={selectedItem.y}\n            style={styles.input}\n            onChangeNumber={number => updateSelectedItem('y', number)}\n          />\n        </View>\n      </View>\n      <View style={styles.labelRow}>\n        <Text style={styles.bold}>Label:</Text>\n        <TextInput\n          value={selectedItem.label}\n          style={styles.input}\n          onChangeText={text => updateSelectedItem('label', text)}\n        />\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n  },\n  row: {\n    marginBottom: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  labelRow: {},\n  column: {\n    flex: 1,\n  },\n  columnSpace: {\n    width: 8,\n  },\n  bold: {\n    fontWeight: 'bold'\n  },\n  input: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 8,\n    backgroundColor: 'white',\n    borderRadius: 4,\n    borderColor: '#ccc',\n    borderWidth: 1,\n    marginTop: 8,\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet, Text } from 'react-native-web';\nimport ColorPicker from './ColorPicker';\nimport SelectionInfo from './SelectionInfo';\n\nfunction Row({ children }) {\n  return (\n    <View style={styles.row}>{children}</View>\n  );\n}\n\nexport default function InformationBar() {\n  return (\n    <View style={styles.root}>\n      <Row>\n        <Text>Document:</Text>\n      </Row>\n      <Row>\n        <Text style={styles.title}>Background color:</Text>\n        <ColorPicker />\n      </Row>\n      <SelectionInfo />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    width: 240,\n    borderLeftWidth: 1,\n    borderLeftColor: '#ccc',\n    borderLeftType: 'solid',\n    padding: 16,\n  },\n  row: {\n    marginBottom: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  title: {\n    fontWeight: 'bold'\n  }\n})\n","import React from 'react';\nimport { View, StyleSheet } from 'react-native-web';\nimport Canvas from './canvas/Canvas';\nimport Sidebar from './sidebar/Sidebar';\nimport InformationBar from './infobar/InformationBar';\n\nexport default function Main() {\n  return (\n    <View style={styles.root}>\n      <Sidebar />\n      <Canvas />\n      <InformationBar />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    height: '100vh',\n    flexDirection: 'row',\n    backgroundColor: '#ebeef2',\n  },\n})\n","import React from 'react';\nimport Main from './components/Main';\nimport { RecoilRoot } from 'recoil';\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <Main />\n    </RecoilRoot>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}