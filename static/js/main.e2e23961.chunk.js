(this["webpackJsonprecoil-paint"]=this["webpackJsonprecoil-paint"]||[]).push([[0],{47:function(e,t,n){e.exports=n(64)},64:function(e,t,n){"use strict";n.r(t);var l=n(0),o=n.n(l),i=n(9),r=n.n(i),s=n(65),c=n(6),u=n(1),a=n(66),m="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/shapes/Element.js";function b({x:e,y:t,width:n,height:l,fill:i,label:r,style:c,onMouseDown:u,onClick:b}){return o.a.createElement(s.a,{style:[f.root,{top:t,left:e,width:n,height:l,backgroundColor:i},c],onMouseDown:u,onClick:b,__self:this,__source:{fileName:m,lineNumber:8,columnNumber:5}},r?o.a.createElement(a.a,{__self:this,__source:{fileName:m,lineNumber:26,columnNumber:9}},r):null)}const f=c.a.create({root:{position:"absolute",justifyContent:"center",alignItems:"center"}});const _=c.a.create({root:{}});const h=c.a.create({root:{borderRadius:"50%"}}),d={rect:function(e){return o.a.createElement(b,Object.assign({},e,{style:_.root,__self:this,__source:{fileName:"/Users/junminliu/Documents/GitHub/recoil-paint/src/components/shapes/Rectangle.js",lineNumber:7,columnNumber:5}}))},ellipse:function(e){return o.a.createElement(b,Object.assign({},e,{style:h.root,__self:this,__source:{fileName:"/Users/junminliu/Documents/GitHub/recoil-paint/src/components/shapes/Ellipse.js",lineNumber:7,columnNumber:5}}))}};let N=1;const g={x:0,y:0};const j=Object(u.atom)({key:"itemIdsState",default:[]}),p=Object(u.atom)({key:"selectedIdsState",default:[]}),y=Object(u.atom)({key:"movingItemIdsState",default:[]}),v=Object(u.atom)({key:"movingItemsSnapshotState",default:{}}),w=Object(u.atom)({key:"canvasLayoutState",default:{x:0,y:0,width:800,height:600}}),E=function(e){let t=new Map;return(n,...l)=>{if(t.has(n))return t.get(n);const o=e(n,...l);return t.set(n,o),o}}(e=>Object(u.atom)({key:"item"+e,default:{type:"rect",id:e,x:g.x,y:g.y,width:200,height:100,fill:"#dbdde4",label:""}}));function O(e,t){return Object(u.selector)({key:e,get:({get:e})=>{const n=e(t);return n.length?n.map(t=>e(E(t))):[]},set:({set:e},t)=>{t.forEach(t=>{let n=t.id;e(E(n),t)})}})}const x=O("selectedItemsSelector",p),S=O("movingItemsSelector",y),D=(O("allItemsSelector",j),Object(u.selector)({key:"selectionBoundingBox",get:({get:e})=>function(e){if(!e.length)return null;let t=null,n=null,l=null,o=null;return e.forEach(e=>{(null===t||e.x<t)&&(t=e.x),(null===l||e.y<l)&&(l=e.y),(null===n||e.x+e.width>n)&&(n=e.x+e.width),(null===o||e.y+e.height>o)&&(o=e.y+e.height)}),{x:t,y:l,width:n-t,height:o-l,isMutilple:e.length>1}}(e(x))}));function R(e){const[t,n]=Object(l.useState)(!1),[o,i]=Object(l.useState)({clientX:0,clientY:0}),[r,s]=Object(l.useState)({x:0,y:0}),c=Object(l.useCallback)((t,n,l,o)=>{e({status:t,isMoving:n,origin:l,offset:o})},[e]),u=Object(l.useCallback)(({clientX:e,clientY:t,metaKey:l,shiftKey:o})=>{let s={clientX:e,clientY:t,metaKey:l,shiftKey:o};n(!0),i(s),c("start",!0,s,r)},[c,r]),a=Object(l.useCallback)(({clientX:e,clientY:n})=>{if(!t)return;const l={x:e-o.clientX,y:n-o.clientY};s(l),c("moving",!0,o,l)},[c,t,o]),m=Object(l.useCallback)(()=>{t&&(n(!1),s({x:0,y:0}),c("end",!1,o,r))},[c,t,r,o]);return Object(l.useEffect)(()=>{function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",m)}return t?(window.addEventListener("mousemove",a),window.addEventListener("mouseup",m)):e(),e},[a,m,t]),{onMouseDown:u}}function k(e){const[t,n]=Object(u.useRecoilState)(S),[o,i]=Object(u.useRecoilState)(v),r=Object(u.useRecoilValue)(y),{onMouseDown:s}=R(l=>{const{status:i,offset:s}=l;e(l),"moving"===i&&r.length&&n(t.map(e=>{let t=o[e.id];return t?{...t,x:t.x+s.x,y:t.y+s.y}:e}))});return Object(l.useEffect)(()=>{i(t.reduce((e,t)=>Object.assign(e,{[t.id]:t}),{}))},[r]),{onMouseDown:s}}function M({id:e}){const t=Object(u.useRecoilValue)(E(e)),n=Object(u.useSetRecoilState)(y),[l,i]=Object(u.useRecoilState)(p),{onMouseDown:r}=k(({status:t,origin:o})=>{if("start"===t){let t;t=o.metaKey||o.shiftKey?[...l,e]:[e],i(t),n([e])}"end"===t&&n([])}),s=function(e){const{type:t}=e;return d[t]}(t);return s?o.a.createElement(s,Object.assign({},t,{onMouseDown:r,__self:this,__source:{fileName:"/Users/junminliu/Documents/GitHub/recoil-paint/src/components/canvas/CanvasItem.js",lineNumber:36,columnNumber:10}})):null}var C="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/canvas/ResizeHandler.js";function H(){const[e,t]=Object(u.useRecoilState)(x),[n,i]=Object(l.useState)(null),{onMouseDown:r}=R(({status:l,offset:o})=>{1===e.length&&("start"===l&&i(e),"moving"===l&&t(n.map(e=>function(e,t){let{x:n,y:l,width:o,height:i}=e;return o+=t.x,i+=t.y,o<0&&(o=-o,n-=o),i<0&&(i=-i,l-=i),{...e,x:n,y:l,width:o,height:i}}(e,o))))});if(1!==e.length)return null;const{x:c,y:a,width:m,height:b}=e[0];return o.a.createElement(s.a,{style:[I.resizeHandler,{left:c+m,top:a+b}],onMouseDown:r,__self:this,__source:{fileName:C,lineNumber:57,columnNumber:5}},o.a.createElement(s.a,{style:I.resizeHandlerDot,__self:this,__source:{fileName:C,lineNumber:64,columnNumber:7}}))}const I=c.a.create({resizeHandler:{width:24,height:24,marginLeft:-13,marginTop:-13,justifyContent:"center",alignItems:"center",cursor:"nwse-resize"},resizeHandlerDot:{width:10,height:10,borderRadius:4,backgroundColor:"white",borderWidth:2,borderColor:"blue",position:"absolute"}});var G="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/canvas/Selection.js";function U(){const e=Object(u.useRecoilValue)(p),t=Object(u.useRecoilValue)(D),n=Object(u.useSetRecoilState)(y),{onMouseDown:l}=k(({status:l})=>{if(!t)return null;"start"===l&&n(e),"end"===l&&n([])});if(!t)return null;const{x:i,y:r,width:c,height:a}=t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{style:[L.selection,{left:i,top:r,width:c,height:a}],onMouseDown:l,__self:this,__source:{fileName:G,lineNumber:35,columnNumber:7}}),o.a.createElement(H,{__self:this,__source:{fileName:G,lineNumber:44,columnNumber:7}}))}const L=c.a.create({selection:{borderWidth:2,borderStyle:"dashed",borderColor:"blue",position:"absolute",cursor:"move"}});function z(e){const t=Object(u.useSetRecoilState)(p),n=Object(l.useCallback)(()=>{t([])},[t]);return o.a.createElement(s.a,{style:c.a.absoluteFill,onClick:n,__self:this,__source:{fileName:"/Users/junminliu/Documents/GitHub/recoil-paint/src/components/canvas/CanvasBackground.js",lineNumber:14,columnNumber:5}})}var V="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/canvas/Canvas.js";function B(){const e=Object(l.useRef)(),t=Object(u.useRecoilValue)(j),n=Object(u.useSetRecoilState)(w);return o.a.createElement(s.a,{style:W.root,ref:e,onLayout:({nativeEvent:{layout:{x:e,y:t,width:l,height:o}}})=>n({x:e,y:t,width:l,height:o}),__self:this,__source:{fileName:V,lineNumber:21,columnNumber:5}},o.a.createElement(z,{__self:this,__source:{fileName:V,lineNumber:22,columnNumber:7}}),t.map(e=>o.a.createElement(M,{key:"item-"+e,id:e,__self:this,__source:{fileName:V,lineNumber:23,columnNumber:26}})),o.a.createElement(U,{__self:this,__source:{fileName:V,lineNumber:24,columnNumber:7}}))}const W=c.a.create({root:{flex:1,backgroundColor:"white"},svg:{flex:1}});var X="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/toolbar/Button.js";function K({Icon:e,disabled:t,style:n,...l}){return o.a.createElement(s.a,Object.assign({accessibilityRole:"button",disabled:t,style:[Y.root,t&&Y.disabled,n]},l,{__self:this,__source:{fileName:X,lineNumber:7,columnNumber:5}}),o.a.createElement(e,{style:[t&&Y.disabledIcon],__self:this,__source:{fileName:X,lineNumber:13,columnNumber:7}}))}const Y=c.a.create({root:{borderWidth:1,borderColor:"#ccc",backgroundColor:"#fff",width:32,height:32,justifyContent:"center",alignItems:"center",borderRadius:4},disabled:{cursor:"default",opacity:.8},disabledIcon:{fill:"#ccc"}});var Z=n(19);function T(e){const{ariaLabel:t,children:n,width:l,height:o,viewBox:i}=e,r=[A.root,e.style];return Object(Z.a)("svg",{role:"presentation",width:l,height:o,"aria-label":t,style:r,viewBox:i||"0 0 24 24"},n)}T.defaultProps={width:24,height:24};const A=c.a.create({root:{display:"inline-block",fill:"currentcolor",height:"1.25em",maxWidth:"100%",position:"relative",userSelect:"none",textAlignVertical:"text-bottom"},iconRtl:{transform:[{scaleX:-1}]}});var F="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/icons/Image.js";function J(e){return o.a.createElement(T,Object.assign({},e,{__self:this,__source:{fileName:F,lineNumber:7,columnNumber:5}}),o.a.createElement("g",{__self:this,__source:{fileName:F,lineNumber:10,columnNumber:7}},o.a.createElement("path",{d:"M19.235,1.75H4.765c-1.662,0-3.015,1.352-3.015,3.015v14.471c0,1.662,1.352,3.015,3.015,3.015h14.471  c1.662,0,3.015-1.352,3.015-3.015V4.765C22.25,3.102,20.898,1.75,19.235,1.75z M21.044,19.235c0,0.997-0.811,1.809-1.809,1.809  H4.765c-0.997,0-1.809-0.811-1.809-1.809v-2.181l4.866-5.407l6.573,5.975l3.635-3.029l3.015,2.512V19.235z M21.044,15.536  l-3.015-2.512l-3.601,3L7.737,9.94l-4.781,5.312V4.765c0-0.997,0.811-1.809,1.809-1.809h14.471c0.997,0,1.809,0.811,1.809,1.809  V15.536z",__self:this,__source:{fileName:F,lineNumber:11,columnNumber:9}}),o.a.createElement("path",{d:"M16.221,10.794c1.662,0,3.015-1.352,3.015-3.015s-1.352-3.015-3.015-3.015c-1.662,0-3.015,1.352-3.015,3.015  S14.558,10.794,16.221,10.794z M16.221,5.971c0.997,0,1.809,0.811,1.809,1.809s-0.811,1.809-1.809,1.809s-1.809-0.811-1.809-1.809  S15.223,5.971,16.221,5.971z",__self:this,__source:{fileName:F,lineNumber:12,columnNumber:9}})))}var q="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/icons/Square.js";function P(e){return o.a.createElement(T,Object.assign({},e,{__self:this,__source:{fileName:q,lineNumber:7,columnNumber:5}}),o.a.createElement("g",{transform:"matrix(.48 0 0 .48 0 0)",__self:this,__source:{fileName:q,lineNumber:10,columnNumber:7}},o.a.createElement("path",{fill:"#000",d:"M44 1h-38c-2.757 0-5 2.243-5 5v38c0 2.757 2.243 5 5 5h38c2.757 0 5-2.243 5-5v-38c0-2.757-2.243-5-5-5Zm3 43c0 1.654-1.346 3-3 3h-38c-1.654 0-3-1.346-3-3v-38c0-1.654 1.346-3 3-3h38c1.654 0 3 1.346 3 3v38Z",__self:this,__source:{fileName:q,lineNumber:11,columnNumber:9}})))}function $({style:e}){const[t,n]=Object(u.useRecoilState)(j),[l,i]=Object(u.useRecoilState)(y),r=Object(u.useSetRecoilState)(p),s=Object(u.useRecoilValue)(w),{onMouseDown:c}=k(({status:e,origin:o})=>{if("start"===e){let e=N++;c=o.clientX-s.x,u=o.clientY-s.y,Object.assign(g,{x:c,y:u}),n([...t,e]),r([]),i([e])}var c,u;"end"===e&&(r([...l]),i([]))});return o.a.createElement(K,{Icon:P,style:e,onMouseDown:c,__self:this,__source:{fileName:"/Users/junminliu/Documents/GitHub/recoil-paint/src/components/toolbar/NewRectangleButton.js",lineNumber:37,columnNumber:10}})}var Q="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/icons/Statistics.js";function ee(e){return o.a.createElement(T,Object.assign({},e,{__self:this,__source:{fileName:Q,lineNumber:7,columnNumber:5}}),o.a.createElement("g",{transform:"matrix(.380952 0 0 .380952 0 0)",__self:this,__source:{fileName:Q,lineNumber:10,columnNumber:7}},o.a.createElement("path",{d:"M10 9h-8c-1.104 0-2 .896-2 2v40c0 1.104.896 2 2 2h8c1.104 0 2-.896 2-2v-40c0-1.104-.896-2-2-2Z",__self:this,__source:{fileName:Q,lineNumber:11,columnNumber:9}}),o.a.createElement("path",{d:"M27.833 23h-8c-1.104 0-2.833.11-2.833.864v27.273c0 .753 1.729 1.863 2.833 1.863h8c1.105 0 1.167-1.11 1.167-1.863v-27.273c0-.754-.062-.864-1.167-.864Z",__self:this,__source:{fileName:Q,lineNumber:12,columnNumber:9}}),o.a.createElement("path",{d:"M44.5 12h-8c-1.104 0-2.5.334-2.5 1.364v37.273c0 1.029 1.396 2.363 2.5 2.363h8c1.104 0 1.5-1.334 1.5-2.363v-37.273c0-1.03-.396-1.364-1.5-1.364Z",__self:this,__source:{fileName:Q,lineNumber:13,columnNumber:9}}),o.a.createElement("path",{d:"M61.5 37h-8c-1.104 0-2.5-.175-2.5.228v14.545c0 .402 1.396 1.227 2.5 1.227h8c1.104 0 1.5-.825 1.5-1.228v-14.544c0-.403-.396-.228-1.5-.228Z",__self:this,__source:{fileName:Q,lineNumber:14,columnNumber:9}})))}var te="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/toolbar/Toolbar.js";function ne(){return o.a.createElement(s.a,{style:le.root,__self:this,__source:{fileName:te,lineNumber:10,columnNumber:5}},o.a.createElement($,{style:le.button,__self:this,__source:{fileName:te,lineNumber:11,columnNumber:7}}),o.a.createElement(K,{disabled:!0,Icon:J,style:le.button,__self:this,__source:{fileName:te,lineNumber:12,columnNumber:7}}),o.a.createElement(K,{disabled:!0,Icon:ee,style:le.button,__self:this,__source:{fileName:te,lineNumber:13,columnNumber:7}}))}const le=c.a.create({root:{flexDirection:"row"},button:{marginRight:8}});var oe="/Users/junminliu/Documents/GitHub/recoil-paint/src/components/Main.js";function ie(){return o.a.createElement(s.a,{style:re.root,__self:this,__source:{fileName:oe,lineNumber:8,columnNumber:5}},o.a.createElement(s.a,{style:re.left,__self:this,__source:{fileName:oe,lineNumber:9,columnNumber:7}},o.a.createElement(ne,{__self:this,__source:{fileName:oe,lineNumber:10,columnNumber:9}})),o.a.createElement(B,{__self:this,__source:{fileName:oe,lineNumber:12,columnNumber:7}}),o.a.createElement(s.a,{style:re.right,__self:this,__source:{fileName:oe,lineNumber:13,columnNumber:7}}))}const re=c.a.create({root:{height:"100vh",flexDirection:"row",backgroundColor:"#ebeef2"},left:{width:240,borderRightWidth:1,borderRightColor:"#ccc",borderRightType:"solid",padding:16},right:{width:200,borderLeftWidth:1,borderLeftColor:"#ccc",borderLeftType:"solid"}});var se="/Users/junminliu/Documents/GitHub/recoil-paint/src/App.js";var ce=function(){return o.a.createElement(u.RecoilRoot,{__self:this,__source:{fileName:se,lineNumber:7,columnNumber:5}},o.a.createElement(ie,{__self:this,__source:{fileName:se,lineNumber:8,columnNumber:7}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue="/Users/junminliu/Documents/GitHub/recoil-paint/src/index.js";r.a.render(o.a.createElement(o.a.StrictMode,{__self:void 0,__source:{fileName:ue,lineNumber:7,columnNumber:3}},o.a.createElement(ce,{__self:void 0,__source:{fileName:ue,lineNumber:8,columnNumber:5}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[47,1,2]]]);
//# sourceMappingURL=main.e2e23961.chunk.js.map